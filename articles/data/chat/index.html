<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>True Buyers Guide ‚Äî Business Brain</title>
  <style>
    :root { --bg:#0b0c0f; --card:#13151a; --text:#e8e8ea; --muted:#a1a1aa; --accent:#6ee7b7; }
    body{margin:0;background:var(--bg);color:var(--text);font:16px/1.5 system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;}
    .wrap{max-width:900px;margin:0 auto;padding:24px;}
    header{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}
    header h1{font-size:18px;margin:0}
    .chat{background:var(--card);border-radius:12px;padding:16px;height:70vh;overflow:auto;border:1px solid #23262d}
    .msg{margin:12px 0;display:flex;gap:12px}
    .role{flex:0 0 auto;font-weight:600;color:var(--accent)}
    .bubble{background:#1a1d24;border:1px solid #2a2f3a;border-radius:10px;padding:10px 12px;max-width:70%}
    .you .role{color:#93c5fd}
    .you .bubble{background:#0f1720;border-color:#1f2a38}
    form{display:flex;gap:10px;margin-top:12px}
    input,button,textarea{font:16px system-ui}
    textarea{flex:1;resize:none;height:56px;border-radius:10px;border:1px solid #2a2f3a;background:#0f1116;color:var(--text);padding:10px}
    button{border:0;background:var(--accent);color:#0c0f0a;padding:0 18px;border-radius:10px;font-weight:700;cursor:pointer}
    .hint{color:var(--muted);font-size:13px;margin-top:6px}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>üß† True Buyers Guide ‚Äî Business Brain</h1>
      <a href="../" style="color:#9ca3af;">‚Üê Back to site</a>
    </header>

    <div id="chat" class="chat"></div>

    <form id="form">
      <textarea id="input" placeholder="Parle au business (ex: 'Cr√©e un guide SEO sur les √©couteurs <50‚Ç¨')"></textarea>
      <button type="submit">Envoyer</button>
    </form>
    <div class="hint">Le Business Brain peut d√©l√©guer au Chef de Projet, SEO Lead, R√©dacteur, BizDev, etc.</div>
  </div>

  <script>
    const chat = document.getElementById('chat');
    const form = document.getElementById('form');
    const input = document.getElementById('input');

    const API_URL = "https://YOUR-VERCEL-APP.vercel.app/api/chat"; // ‚Üê on mettra l‚ÄôURL Vercel √† l‚Äô√©tape 3

    function addMsg(role, text, you=false){
      const row=document.createElement('div'); row.className='msg'+(you?' you':'');
      const r=document.createElement('div'); r.className='role'; r.textContent=you?'You':'Brain';
      const b=document.createElement('div'); b.className='bubble'; b.innerHTML=text.replace(/\n/g,'<br>');
      row.append(r,b); chat.append(row); chat.scrollTop=chat.scrollHeight;
    }

    form.addEventListener('submit', async (e)=>{
      e.preventDefault();
      const text = input.value.trim();
      if(!text) return;
      addMsg('you', text, true);
      input.value = '';

      // Appel backend (stream facultatif, ici on fait simple)
      try {
        const res = await fetch(API_URL, {
          method: 'POST',
          headers: {'Content-Type':'application/json'},
          body: JSON.stringify({ message: text })
        });
        if(!res.ok){ throw new Error(await res.text()); }
        const data = await res.json();
        addMsg('brain', data.reply || '(r√©ponse vide)');
      } catch(err){
        addMsg('brain', '‚ùå Erreur: '+err.message);
      }
    });

    // Message d‚Äôaccueil
    addMsg('brain', "Bonjour üëã Je suis le Business Brain. Dis-moi ce que tu veux : recherche produit, plan SEO, nouveau guide, outreach‚Ä¶");
  </script>
</body>
</html>